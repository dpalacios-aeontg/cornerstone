<div id="vue-product-list">
    <template v-if="currentProducts.length > 0">
        <div v-if="settingsDataTagEnabled" :data-list-name="'Category: ' + category.name">
            <ul class="productGrid">
                <li v-for="product in currentProducts" class="product">
                    <article class='card' :data-test="'card-' + product.id">
                        <figure class="card-figure">
                            <a :href="product.url" class="card-figure__link" :aria-label="product.name">
                                <div class='card-img-container'>
                                    <img
                                        class='card-image'
                                        :src="getImageSrc(product.image.data, 'default')"
                                        :data-srcset="getImageDataSrcSet(product.image.data)"
                                        :alt="product.image.alt"
                                    />
                                </div>
                                <div class="card-body">
                                    <p v-if="product.brand.name" class="card-text" data-test-info-type="brandName">\{{ product.brand.name }}</p>
                                    <h3 class="card-title">
                                        <a :href="product.url" :aria-label="product.name" data-event-type="product-click">\{{ product.name }}</a>
                                    </h3>
                                    <div class="card-text" data-test-info-type="price">
                                        <template v-if="product.price.without_tax">
                                            <div v-show="!product.price.rrp_without_tax" class="price-section price-section--withoutTax rrp-price--withoutTax" :class="{'price-section--minor': product.price.with_tax}">
                                                <span>
                                                    {{> components/products/price-label
                                                        label_value=theme_settings.pdp-retail-price-label
                                                        fallback=(lang "page_builder.pdp-retail-price-label")
                                                    }}
                                                </span>
                                                <span data-product-rrp-price-without-tax class="price price--rrp">
                                                    \{{product.price?.rrp_without_tax.formatted || ''}}
                                                </span>
                                            </div>
                                            <div v-show='!product.price.non_sale_price_without_tax' class="price-section price-section--withoutTax non-sale-price--withoutTax" :class="{'price-section--minor': product.price.with_tax}">
                                                <span>
                                                    {{> components/products/price-label
                                                        label_value=theme_settings.pdp-non-sale-price-label
                                                        fallback=(lang "page_builder.pdp-non-sale-price-label")
                                                    }}
                                                </span>
                                                <span data-product-non-sale-price-without-tax class="price price--non-sale">
                                                    \{{product.price?.non_sale_price_without_tax.formatted || ''}}
                                                </span>
                                            </div>
                                            <div class="price-section price-section--withoutTax">
                                                <span v-show='!product.price.non_sale_price_without_tax' class="price-label">
                                                    {{theme_settings.pdp-price-label}}
                                                </span>
                                                <span v-show='!product.price.non_sale_price_without_tax' class="price-now-label">
                                                    {{> components/products/price-label
                                                        label_value=theme_settings.pdp-sale-price-label
                                                        fallback=(lang "page_builder.pdp-sale-price-label")
                                                    }}
                                                </span>
                                                <span data-product-price-without-tax class="price price--withoutTax" :class="{'price-section--minor': product.price.with_tax}">\{{product.price?.without_tax.formatted || ''}}</span>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </a>
                        </figure>
                    </article>
                </li>
            </ul>
        </div>
        <div v-else>
            <ul class="productGrid">
                <li v-for="product in currentProducts" class="product">
                    <article class='card' :data-test="'card-' + product.id">
                        <figure class="card-figure">
                            <a :href="product.url" class="card-figure__link" :aria-label="product.name">
                                <div class='card-img-container'>
                                    <img
                                        class='card-image'
                                        :src="getImageSrc(product.image.data, 'default')"
                                        :data-srcset="getImageDataSrcSet(product.image.data)"
                                        :alt="product.image.alt"
                                    />
                                </div>
                                <div class="card-body">
                                    <p v-if="product.brand.name" class="card-text" data-test-info-type="brandName">\{{ product.brand.name }}</p>
                                    <h3 class="card-title">
                                        <a :href="product.url" :aria-label="product.name" data-event-type="product-click">\{{ product.name }}</a>
                                    </h3>
                                    <div class="card-text" data-test-info-type="price">
                                        <template v-if="product.price?.without_tax">
                                            <div v-show="!product.price?.rrp_without_tax" class="price-section price-section--withoutTax rrp-price--withoutTax" :class="{'price-section--minor': product.price?.with_tax}">
                                                <span>
                                                    {{> components/products/price-label
                                                        label_value=theme_settings.pdp-retail-price-label
                                                        fallback=(lang "page_builder.pdp-retail-price-label")
                                                    }}
                                                </span>
                                                <span data-product-rrp-price-without-tax class="price price--rrp">
                                                    \{{product.price?.rrp_without_tax?.formatted || ''}}
                                                </span>
                                            </div>
                                            <div v-show='!product.price?.non_sale_price_without_tax' class="price-section price-section--withoutTax non-sale-price--withoutTax" :class="{'price-section--minor': product.price?.with_tax}">
                                                <span>
                                                    {{> components/products/price-label
                                                        label_value=theme_settings.pdp-non-sale-price-label
                                                        fallback=(lang "page_builder.pdp-non-sale-price-label")
                                                    }}
                                                </span>
                                                <span data-product-non-sale-price-without-tax class="price price--non-sale">
                                                    \{{product.price?.non_sale_price_without_tax?.formatted || ''}}
                                                </span>
                                            </div>
                                            <div class="price-section price-section--withoutTax">
                                                <span v-show='!product.price?.non_sale_price_without_tax' class="price-label">
                                                    {{theme_settings.pdp-price-label}}
                                                </span>
                                                <span v-show='!product.price?.non_sale_price_without_tax' class="price-now-label">
                                                    {{> components/products/price-label
                                                        label_value=theme_settings.pdp-sale-price-label
                                                        fallback=(lang "page_builder.pdp-sale-price-label")
                                                    }}
                                                </span>
                                                <span data-product-price-without-tax class="price price--withoutTax" :class="{'price-section--minor': product.price?.with_tax}">\{{product.price?.without_tax?.formatted || ''}}</span>
                                            </div>
                                        </template>
                                    </div>
                                </div>
                            </a>
                        </figure>
                    </article>
                </li>
            </ul>
        </div>
    </template>
    <template v-else>
        <p data-no-products-notification
            role="alert"
            aria-live="assertive"
            tabindex="-1"
            >
                {{lang 'categories.no_products'}}
        </p>
    </template>
</div>